# PRD: 국회 보좌진 업무 효율 향상을 위한 **프롬프트 생성기** (PromptLab for Assembly Aides)

## 0) 개요

- **목적**: 보좌진이 *결과물(보도자료·연설문·SNS 글)*이 아니라, 어떤 LLM에도 바로 재사용 가능한 **고품질 “프롬프트”**를 즉시 얻도록 함.
- **핵심 전략**
  1. **템플릿화**: 형식(보도자료/연설문/SNS) 룰팩, 레벨(초/중/고급) 가이드, 톤/컴플라이언스·금지어, 출력 스키마, 길이 상한
  2. **LLM 위임**: 사용자 **주제 의미 해석**, 형식별 **구성요소 우선순위 결정**, 레벨별 **세부 지시 문안화**, **미세 톤 조정/리스크 반영**
  3. **토큰 거버넌스**(입력·연산·출력 3단계)로 **비용/지연 최소화**
- **배포 환경**: **Vercel + Next.js(App Router)** 우선. 단순 경로는 Edge, 멀티스텝은 Node 런타임 분리.

---

## 1) 배경/문제

- 국정감사·정기국회 등 **속도·정확성·일관 톤** 요구 ↑
- “AI로 바로 작성”은 **토큰 폭증/비용 불투명/품질 편차** 문제
- 해결책: **메타 레이어(프롬프트 생성기)** → 다양한 LLM/툴에서 재사용

---

## 2) 목표 / 비목표

**Goals**

- 주제+옵션 입력 → **즉시 사용 가능한 단일 프롬프트** 제공
- 형식·레벨별 **일관 품질** 보장(체크리스트 기반)
- **요청당 토큰 평균 < 900**, 응답 P50 **< 1.5초**(Edge) 목표
- 규정/금지어/팩트체크 **가드레일 내장**

**Non-Goals**

- 완성 문서 자동 작성(본 제품은 **프롬프트 생성기**)
- 초기 단계에서 복잡 멀티에이전트/외부 검색 결합

---

## 3) 대상 사용자

- **국회의원 보좌진(정책/공보/행정)**, 대변인실, 대관·정책 분석 실무자

---

## 4) 핵심 가치

- **토큰/시간 절감**: 프롬프트만 생성 → 어디서든 재사용
- **품질 가드레일**: 형식별 룰팩 + 컴플라이언스/금지어 + 체크리스트
- **확장성**: 보도자료→연설문→SNS→질의서→보고서→언론스크랩→FAQ/브리핑/Q&A 로 확대

---

## 5) 사용자 플로우

1. **주제 입력**
2. **형식 선택**: 보도자료 / 연설문 / SNS / 질의서 작성 / 보고서 작성 / 언론보도 스크랩
3. **레벨**: 초 / 중 / 고급
4. (선택) **모델타입**(비추론/추론), **톤**, **길이**, **SNS 플랫폼**
5. **[생성]** → 결과 영역에 **프롬프트(텍스트 한 덩어리)** 표시 + 복사

---

## 6) 기능 요구사항

### 6.1 MVP

- 입력: 주제, 형식, 레벨 (+ 선택 옵션)
- 처리:
  - **정규화(LLM)**: 주제 → 도메인/핵심 메시지/이해관계자/리스크
  - **룰팩 적용(템플릿)**: 형식 스키마 + 레벨 가이드 + 톤/컴플라이언스
  - **프롬프트 생성(LLM)**: 단일 텍스트, 길이/섹션/금지어 준수
  - **체크리스트 검사(규칙)**: 누락·길이·금지어 검증
  - (필요 시 1회) **자동 재작성(LLM)**: 체크 미준수 항목 보완
- 출력: **프롬프트 문자열**, 메타(형식/레벨/룰팩 버전/토큰)

### 6.2 Phase 2+

- 프리셋 저장/공유, 히스토리, 즐겨찾기
- SNS 플랫폼별 N안, 품질 점수/AB 테스트
- 조직 룰팩/톤팩 버전 관리, 대시보드(사용량/품질)

---

## 7) 템플릿화 vs LLM 위임 (결정 원칙)

- **템플릿화**: 형식 분기 룰팩, 레벨 가이드(길이/엄격도), 톤/컴플라이언스·금지어, 출력 스키마, 체크리스트, 토큰 상한
- **LLM 위임**: 주제 의미 해석/정규화, 형식별 구성요소 우선순위, 레벨별 지시 문안화, 미세 톤/리스크 컨텍스트

---

## 8) 정보 구조·스키마 (요약)

**내부 중간 스펙(JSON)**

- userInput: topic/format/level/modelType/tone/extras(platform,lengthHint …)
- normalized: domain/keyMessages/risks
- rulepacks: formatPack/levelGuide/tonePack/compliance
- constraints: maxTokens/sections/forbidden

**룰팩 스키마(예)**

- formatPackId: press_release_v1 | speech_v1 | sns_v1 | inquiry_v1 | report_v1 | media_scraping_v1
- requiredSections, toneDefault, dos/donts, structureHints, complianceRules
- levelGuide: basic/intermediate/advanced (길이/검증 강도/필수 지시 수)

---

## 9) 형식별 프롬프트 구성요소 (요약)

- **보도자료**: 헤드라인·서브헤드 규칙, 리드, 배경, 근거/수치, 인용(직함), 문의/후속일정, 과장 금지, 출처·팩트 요구
- **연설문**: 청중·장소·길이, 스토리 아크(후킹→문제→비전→정책→호소), 수사 장치 가이드, 페이싱/박수 포인트(중급↑), 반론 프레임(고급)
- **SNS**: 플랫폼 제약(자수/링크/후킹), CTA/해시태그/이모지 정책, 단문 변형 N안, 광고성/오해 소지 문구 필터
- **질의서 작성**: 질의 목적·배경 명시, 구체적 질문사항 나열, 답변 요구 형식, 회신 기한, 관련 법령/규정 근거, 후속조치 계획
- **보고서 작성**: 요약(핵심 내용), 배경/현황 분석, 쟁점/문제점 도출, 대안 검토, 결론/권고사항, 부록(참고자료), 객관성 유지
- **언론보도 스크랩**: 검색 키워드 설정, 수집 기간/매체 범위, 분석 관점(긍정/부정/중립), 요약 형식(시계열/주제별), 트렌드 분석

---

## 10) 토큰/비용 거버넌스

- **입력**: UI 키-값만 전송(수십 토큰), 과거 히스토리 미포함
- **연산**: (1) 정규화(짧은 호출) → (2) 최종 생성(주 호출, `max_tokens` 400~700) → (옵션) 재작성 1회
- **출력**: 단일 프롬프트, 길이 하드캡
- **상한**: 요청당 LLM 호출 ≤ 2회, 총 토큰 평균 < 900

---

## 11) 시스템 아키텍처 / 배포

- **Next.js(App Router)**, **Vercel**
  - **Edge 경로**: 단일·저지연(룰팩 적용 + 1~2회 호출)
  - **Node 경로**(확장): 멀티스텝/툴호출/장시간 작업
- **API**
  - POST `/api/prompt` : 정규화 → 룰팩 적용 → 생성 → 검사 → (재작성) → 프롬프트 반환
  - GET `/api/rulepacks` : (선택) 룰팩 메타/버전
- **데이터**: 룰팩 JSON(레포/스토리지), (Phase2) 사용자 프리셋/로그 DB(KV/PG)

---

## 12) UX 요구사항

- 주제 입력란 + 토글(형식/레벨/모델타입/톤/길이/플랫폼)
- [생성] 클릭 → **프롬프트만** 표시(불필요 설명 금지) + [복사]
- (Phase2) 체크리스트 통과 배지, 경고 태그, 프리셋 저장

---

## 13) 품질 기준 / 수용 기준

- 형식별 **필수 섹션** 누락 없음(누락 시 자동 재작성 또는 경고)
- **금지어/과장** 없음, **팩트·출처 요구** 명시
- 레벨별 길이/지시 강도 차등 명확(케이스 10종 회귀 테스트 통과)
- 요청당 토큰 평균 < 900 / 95p < 1200
- 응답 P50 < 1.5s(Edge), P95 < 3s
- 반환물은 **프롬프트 텍스트 1개**(+간단 meta)

---

## 14) 관찰성/분석

- 로그: 요청ID, 형식/레벨, 룰팩 버전, 토큰(입·출), 재작성 횟수, 경고
- 메트릭: 성공률, 응답시간, 체크리스트 통과율, 사용자별 사용량
- (Phase2) 대시보드: 형식별 품질 점수, 길이 분포, 금지어 위반 빈도

---

## 15) 보안/컴플라이언스

- API 키 서버사이드/환경변수, PII 로깅 최소화
- 정치/의료/금융 등 **민감 주제 리스크 라벨** + “검증·출처” 강화
- 공공 커뮤니케이션 가이드 반영(과장·추정성 금지, 모호 주어 지양)

---

## 16) 로드맵

- **Phase 1(MVP)**: 보도자료/연설문/SNS, 3레벨, 룰팩 v1 + 체크리스트 v1, Edge 경로 1~2콜, 복사/로그
- **Phase 2**: 프리셋/히스토리, SNS N안, 품질 점수·AB Test, Node 경로(선택 LangGraph)
- **Phase 3**: 카테고리 확장(FAQ/브리핑/Q&A), 조직 룰팩 버전 관리, 대시보드

---

## 17) KPI

- 생성까지 사용자 체감 시간 < 10초(UI 포함)
- 프리셋 저장/재사용률 ≥ 35%
- 체크리스트 통과율 ≥ 85%
- 토큰/요청 평균 < 900(월 예산 준수)
- NPS/CSAT ≥ 8/10

---

## 18) 리스크 & 대응

- 진부한 출력(템플릿 티 남) → 룰팩에 **랜덤화/동의어 슬롯**
- LLM 편차 → 체크리스트 기반 **재작성 1회** 허용
- 토큰 초과 → 레벨·길이 하드캡, “질문 환원 금지·축약 규칙”
- Vercel 제약 → Edge(단순)/Node(복잡) **경로 분리 라우팅**

---

## 19) 부록 A: 시스템 프롬프트(요지)

- 역할: **프롬프트 엔지니어**. 사용자의 topic/format/level/옵션을 받아 **“사용자가 복사해 쓸 단일 프롬프트”**만 작성.
- 준수: 형식별 필수 섹션, 레벨별 길이/엄격도, 톤/컴플라이언스, 금지어, 출력 스키마.
- 위반 시: 스스로 수정(재작성) 지시 포함.

---

## 20) 부록 B: 체크리스트 예시(보도자료·중급)

- [ ] 헤드라인: 고유명사/수치 ≥1
- [ ] 리드: 2~3문장 핵심 요약
- [ ] 본문: 배경→근거/수치→인용(직함/이름)→후속일정/문의
- [ ] 과장/추측성 표현 없음, 모호 주어 금지
- [ ] 출처·팩트 검증 지시 포함
- [ ] 총 길이 ≤ 600 tokens

---

## 21) 부록 C: API 계약(초안)

- `POST /api/prompt`
  - req: `{ userInput, options }` (userInput: topic/format/level/modelType/tone/extras…)
  - res: `{ prompt: string, meta: { rulepackId, format, level, tokens, warnings?: string[] } }`
